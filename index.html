<!DOCTYPE html>
<html>
<head>
  <title>SKOS Visualization</title>
  <script src="n3.js"></script>
  <script src="skos-parser.js"></script>
  <script src="d3.js"></script>
  <script src="d3-hsv.js"></script>
  <script src="layout.js"></script>
  <script src="render.js"></script>
</head>
<body>
  <script>
    fetchVocab("timescale-isc2014.ttl").then(vocabParsed)

    function vocabParsed(vocab) {
      document.querySelector('p').innerText = "Laying out vocabulary..."

      layoutVocab(vocab.concepts, (words, flatConcepts, size) => {
        d3.select('div p').remove()
        renderVocab(words, d3.select('div'), size)

        var conceptList = d3.select('ul').selectAll('li').data(flatConcepts)
        conceptList.exit().remove()
        conceptList.enter().append('li').text((data) => data.label)
        conceptList.text((data) => data.label)
      }, vocab.title)
    }
  </script>
  <div style="width: 1000px; height: 1000px;">
    <p>Loading vocabulary...</p>
  </div>
  <ul style="column-count: 5">
  </ul>
</body>
</html>
